---
title: 关于像素
date: 2021-03-18 16:14:44
tags: 
- CSS
- 浏览器
categories:
- [前端, CSS]
- [前端, 浏览器]
cover: http://oss.xiefeng.tech/img/20210318161939.jpg
katex: true
---

# 像素

一个像素由红绿蓝三个**像点**组成，通过空间混色法显示颜色

点距：相邻同种颜色像点的距离

点距可以用来描述像素，点距越小，等距离的像素越多，显示越好。

# 分辨率

分辨率一般分为屏幕分辨率和图像分辨率。

**屏幕分辨率**

屏幕分辨率指一个屏幕具体由多少个像素点组成。

例如：iPhone XSMax 的分辨率为 2688x1242，这表示手机分别在垂直和水平上所具有的像素点数为 2688 和 1242。

我们经常见到用 K和 P这个单位来形容屏幕：

- P代表的就是屏幕纵向的像素个数， 1080P即纵向有 1080个像素，分辨率为 1920X1080的屏幕就属于 1080P屏幕。 
- K代表屏幕横向有几个 1024个像素，一般来讲横向像素超过 2048就属于 2K屏，横向像素超过 4096就属于 4K屏。

我们平时所说的高清屏其实就是屏幕的物理分辨率达到或超过 1920X1080的屏幕。 

**图像分辨率**

图片分辨率一般指的是一张图片含有的像素数。

例如：一张图片的分辨率为 800x400，这表示图片分别在垂直和水平上所具有的像素点数为 800和 400。 

同一尺寸的图片，分辨率越高，图片越清晰。

# PPI

PPI：每英寸包括的像素数，Pixel Per Inch

PPI 用于描述屏幕的清晰度以及一张图片的质量：

- 使用 PPI描述图片时， PPI越高，图片质量越高
- 使用 PPI描述屏幕时， PPI越高，屏幕越清晰

iPhone XSMax 和 iPhone SE 的 PPI 分别为 458和 326，这足以证明 Phone XSMax 的屏幕更清晰。

PPI 的计算方法：$$ \frac{\sqrt{水平像素点数^2+垂直像素点数^2}}{尺寸}$$

iPhone6 的 PPI为 $ \frac{\sqrt{1334^2+750^2}}{4.7}=325.6$，那它每英寸约含有 326个物理像素点。

# DPI

DPI：即每英寸包括的点数，Dot Per Inch

这里的点是一个抽象的单位，它可以是屏幕像素点、图片像素点也可以是打印机的墨点。

DPI 可以用来描述图片和屏幕，此时 DPI 和 PPI 是等价的。

DPI 一般用于描述打印机，表示打印机每英寸可以打印的点数。

一张图片在屏幕上显示时，它的像素点数是规则排列的，每个像素点都有特定的位置和颜色。 当使用打印机进行打印时，打印机可能不会规则的将这些点打印出来，而是使用一个个打印点来呈现这张图像，这些打印点之间会有一定的空隙，DPI所描述的就是打印点的密度。

所以，打印机的 DPI越高，打印图像的精细程度就越高，同时这也会消耗更多的墨点和时间。

# 设备独立像素

随着科技的发展，低分辨率的手机已经不能满足需求，高分辨率屏幕就诞生了。

理论上来讲，320x480 分辨率手机上的图片和文字，在 640x940 分辨率手机上会被缩放一倍，因为它的分辨率提高了一倍。这样，岂不是后面出现更高分辨率的手机，页面元素会变得越来越小吗？

然而，事实并不是这样的，我们现在使用的智能手机，不管分辨率多高，他们所展示的界面比例都是基本类似的。

乔布斯在 iPhone4 的发布会上首次提出了 RetinaDisplay(视网膜屏幕)的概念，它正是解决了上面的问题，这也使它成为一款跨时代的手机。 

在 iPhone4 使用的视网膜屏幕中，把 2x2个像素当 1个像素使用，这样让屏幕看起来更精致，但是元素的大小却不会改变。 

我们必须用一种单位来告诉不同分辨率的手机，它们在界面上显示元素的大小是多少，这个单位就是设备独立像素( DeviceIndependentPixels)简称 DIP或 DP。

chrome 的开发者工具可以模拟各个手机型号的显示情况，每种型号上面会显示一个尺寸，该尺寸的单位就是设备独立像素。

比如：iPhone X显示的尺寸是 375x812，实际 iPhone X 的分辨率会比这高很多，这里显示的就是设备独立像素。

![iphoneX分辨率](http://oss.xiefeng.tech/img/20210318152146.png)

# 设备像素比

设备像素比：**物理像素**和**设备独立像素**的比值，device pixel ratio 简称 dpr

通过 `window.devicePixelRatio` 可获取设备的 dpr，在 css 中可以使用媒体查询 `min-device-pixel-ratio` 区分 dpr。

移动端开发中样式单位其实都使用的是设备独立像素，iOS的尺寸单位为 `pt`， Android的尺寸单位为 `dp`，它们其实都是设备独立像素 `dp`。

UI给我们的原型图一般是基于 iphone6 的像素给定的， 为了适配所有机型，我们在写样式时需要把物理像素转换为设备独立像素。

例如：如果给定一个元素的高度为 `200px` (这里的 `px` 指物理像素)， iphone6 的设备像素比为 2，我们给定的高度应为 `200px/2=100dp`。

## 设计像素

上面的规则也有例外， iPhone6、7、8Plus 的实际物理像素是 1080x1920，在开发者工具中可以看到它们的设备独立像素是 414x736，设备像素比为 3，设备独立像素和设备像素比的乘积并不等于 1080x1920，而是等于 1242x2208。 

实际上，手机会自动把 1242x2208 个像素点塞进 1080x1920 个物理像素点来渲染，我们不用关心这个过程。

而 1242x2208 被称为屏幕的**设计像素**，我们开发过程中也是以这个**设计像素**为准。

实际上，从苹果提出视网膜屏幕开始，才出现设备像素比这个概念，因为在这之前，移动设备都是直接使用物理像素来进行展示

Android同样使用了其他的技术方案来实现 DPR大于 1的屏幕，不过原理是类似的。由于 Android屏幕尺寸非常多、分辨率高低跨度非常大，不像苹果只有它自己的几款固定设备、尺寸。由于各个设备的尺寸、分辨率上的差异，设备独立像素也不会完全相等，所以各种 Android设备仍然不能做到在展示上完全相等。

## Retina

让多个物理像素渲染一个独立像素只是 Retina屏幕为了达到效果而使用的一种技术，而不是所有 DPR>1的屏幕就是 Retina屏幕。 

比如：给你一块超大尺寸的屏幕，即使它的 PPI很高， DPR也很高，在近距离你也能看清它的像素点，这就不算 Retina屏幕。

# CSS像素

CSS像素：在页面中通过 `px` 设置的像素，在 PC 端在没有缩放（包括系统缩放和页面缩放）的情况下 `1px = 1 物理像素`，或者说 PC 的设备独立像素等于物理像素，在移动端页面中一个 CSS像素等于一个设备独立像素。

CSS 像素的相对大小是很容易被改变的，当用户对浏览器进行了放大， CSS像素会被放大，这时一个 CSS像素会跨越更多的物理像素。

**页面的缩放系数 = CSS像素 / 设备独立像素** 

在浏览器中所能获取到的任何像素都是 CSS 像素。

# 视口

很多文章说浏览器有两个/三个视口，什么布局视口、视觉视口、理想视口，很容易就云里雾里。

视口只存在于移动端浏览器中，通过 `meta` 标签可以进行设置，因为移动端的设备屏幕比较小而且都是拿设备独立像素来渲染各种内容，所以引入了 viewport 的概念。

viewport 是为了解决给 PC 端设计的网页在移动端无法完整的显示的问题，毕竟一个 PC 端的网页宽度上千像素，一个手机的宽度只有三四百像素（DP）。

浏览器会将内容放在 viewport 中渲染，默认一般 viewport 的宽度为 `900px`，所有的 `px` 都是指的是 CSS 像素，所以就有了缩放的概念，一个手机的宽度只有三四百就需要将页面缩小，所谓的缩小是指物理像素层面，CSS 像素的数值并没有改变。

一般情况下在移动端为了让 CSS 像素能够和 DP 相等，就需要设置视口的宽度。通过 `width=device-width` 可以很容易设置。

可以控制 viewport 的缩放，`inital-scale` 可以设置初始缩放比。

缩放的计算公式：缩放比 = 手机宽度(DP)/viewport宽度。

通过设置 `initial-sacle=1` 也可以很容易的让 CSS 像素能够和 DP 相等，缩放比和手机宽度固定了改变的就是 viewport 宽度。